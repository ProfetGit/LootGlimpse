Technical Documentation: Modern WoW Addon ArchitecturePart 1: The "Invisible Anchor" Pattern (Edit Mode)To integrate with Blizzard's Edit Mode without Taint issues or complex XML templates, we use the Container Pattern via EditModeExpanded-1.0.Core ConceptWe decouple the Positioning Logic from the Display Logic.The Anchor (Container):A permanent, invisible Frame.Registered with EditModeExpanded.Holds the X/Y coordinates and Size.Never interacts with combat secure headers directly.The Content (Children):Transient frames (loot bars, notifications).Parented to the Anchor.Inherits position automatically.Can be faded, hidden, or destroyed without affecting the saved layout.Implementation Steps1. DependenciesEnsure EditModeExpanded-1.0 is in your Libs folder and loaded in your .toc.## Interface: 110000
## Title: MyAddon
## SavedVariables: MyAddonDB

# Load Library XML first
Libs\EditModeExpanded-1.0\EditModeExpanded-1.0.xml

# Load Core Logic
Core.lua
2. Initialization Code (Core.lua)Place this in your main initialization flow.local addonName, ns = ...
local lib = LibStub:GetLibrary("EditModeExpanded-1.0", true)
local dbName = "MyAddonDB"

local function InitEditMode()
    -- 1. Get/Create DB
    local db = _G[dbName]
    if not db then db = {} _G[dbName] = db end
    db.EditMode = db.EditMode or {}

    -- 2. Create the Anchor
    -- This frame is invisible during gameplay but turns Blue/Selectable in Edit Mode
    local anchor = CreateFrame("Frame", addonName.."Anchor", UIParent)
    anchor:SetSize(300, 400) -- "Hit Box" size for dragging. Defines the growth area.
    anchor:SetPoint("CENTER")
    
    -- 3. Register with Library
    if lib then
        -- RegisterFrame(Frame, HumanReadableName, DatabaseSubTable, [AnchorTo], [AnchorPoint], [Clamped])
        lib:RegisterFrame(anchor, "Loot Glimpse List", db.EditMode, UIParent, "BOTTOMLEFT", true)
        
        -- Allow user to resize the container to define max list height
        -- RegisterResizable(frame, min, max, step)
        lib:RegisterResizable(anchor, 50, 800, 10)
        
        -- Optional: Add a "Show in Combat" checkbox to the Edit Mode settings
        lib:RegisterToggleInCombat(anchor)
    end

    -- 4. Store reference for your logic
    ns.Anchor = anchor
end

-- Run on Login
local f = CreateFrame("Frame")
f:RegisterEvent("PLAYER_LOGIN")
f:SetScript("OnEvent", InitEditMode)
Part 2: Native "Modern WoW" VisualsTo make the addon look like it belongs in Dragonflight/War Within, avoid custom textures. Use Blizzard's internal mixins and assets.1. The Backdrop (Borders & Backgrounds)Since Shadowlands, frames do not have backgrounds by default. You must inherit BackdropTemplate.The Standard Tooltip definition:Use this table to get the standard dark grey background with the silver/grey border.local NATIVE_BACKDROP = {
    bgFile = "Interface\\Tooltips\\UI-Tooltip-Background",
    edgeFile = "Interface\\Tooltips\\UI-Tooltip-Border",
    tile = true, 
    tileSize = 16, 
    edgeSize = 16,
    insets = { left = 4, right = 4, top = 4, bottom = 4 }
}
Applying it to a frame:local f = CreateFrame("Frame", nil, parent, "BackdropTemplate") -- MUST inherit template
f:SetBackdrop(NATIVE_BACKDROP)

-- STYLE 1: The "Modern Dark" (Dragonflight Style)
f:SetBackdropColor(0.1, 0.1, 0.1, 0.9) -- Dark grey, high opacity
f:SetBackdropBorderColor(0.6, 0.6, 0.6, 1) -- Soft grey border

-- STYLE 2: The "Rarity" Border (For Loot)
-- r, g, b values come from C_Item.GetItemQualityColor
f:SetBackdropBorderColor(r, g, b, 1) 
2. Typography (Fonts)Never hardcode font paths (e.g., Fonts\\FRIZQT__.TTF). It breaks when users use font-replacement addons (like ElvUI). Use the Global Font Objects.Font ObjectUse CaseAppearanceGameFontNormalTitles, HeadersGold, medium size.GameFontWhiteBody textWhite, medium size.GameFontHighlightHover textWhite, bright.GameFontNormalSmallMetadataGold, small.GameFontDisableInactive textGreyed out.SystemFont_Shadow_Huge3Big AlertsMassive, dropshadow.Usage:local text = f:CreateFontString(nil, "OVERLAY", "GameFontNormal")
text:SetPoint("CENTER")
text:SetText("Legendary Item")
3. Icons (Trimming)Raw WoW icons have ugly rough edges. You must trim 8% off the edges to make them look modern/square.local icon = f:CreateTexture(nil, "ARTWORK")
icon:SetSize(32, 32)
icon:SetTexture(itemTextureID)

-- THE MAGIC TRICK: Zoom in to remove rough edges
icon:SetTexCoord(0.08, 0.92, 0.08, 0.92) 
Part 3: Performance (Frame Pooling)Problem: If you CreateFrame every time loot drops, you will create thousands of frames in a raid, causing garbage collection spikes (lag). Solution: Use an ObjectPool.Implementationlocal framePool = CreateFramePool("Frame", ns.Anchor, "BackdropTemplate", function(pool, frame)
    -- Reset function: Called when a frame is returned to the pool
    frame:Hide()
    frame:SetAlpha(1)
    frame:ClearAllPoints()
end)

local function SpawnLootRow(data)
    -- 1. Acquire a clean frame (creates new if empty, reuses old if available)
    local f, isNew = framePool:Acquire()
    
    if isNew then
        -- One-time setup (Backdrops, FontStrings)
        f:SetBackdrop(NATIVE_BACKDROP)
        f:SetSize(250, 40)
        -- Create fonts/textures here...
    end
    
    -- 2. Runtime setup (Set text, icon, color)
    f:Show()
    -- Set data...
    
    -- 3. Animation cleanup
    -- When animation finishes, return to pool
    C_Timer.After(4, function() 
        framePool:Release(f) 
    end)
end
Part 4: Advanced Library API (EditModeExpanded)The library contains several powerful features not listed in the basic setup.1. Visibility & Behavior OptionsThese functions add checkboxes/logic to the Edit Mode dialog for your frame.FunctionDescriptionlib:RegisterHideable(frame, [callback])Adds a "Hide" checkbox. Optional callback runs when toggled.lib:RegisterToggleInCombat(frame)Adds "Toggle Visibility in Combat". Useful for loot frames you want to see during boss fights.lib:RegisterHiddenUntilMouseover(frame, name)Adds "Hide Until Mouseover". Great for clutter reduction.lib:HideByDefault(frame)Forces the frame to start hidden in new profiles until enabled.2. Custom Settings ControlsYou can inject your own settings directly into the Edit Mode window.-- Add a Slider
-- onChanged: function(value)
lib:RegisterSlider(frame, "Icon Size", "iconSizeDBKey", function(val) 
    print("Size is now", val) 
end, 10, 100, 5)

-- Add a Custom Checkbox
-- internalName: key used in DB
lib:RegisterCustomCheckbox(frame, "Show Realm Name", 
    function() print("Checked") end, 
    function() print("Unchecked") end, 
    "showRealm")
    
-- Add a Button
lib:RegisterCustomButton(frame, "Reset Data", function() 
    MyAddonDB.reset() 
end)

-- Add X/Y Coordinate Inputs
lib:RegisterCoordinates(frame)
3. Minimap IntegrationIf your addon has a minimap button, you can let Edit Mode handle its placement.Prerequisites: You must have LibDataBroker-1.1 and LibDBIcon-1.0 loaded.Usage:-- Registers a checkbox "Pin to Minimap" in the Edit Mode dialog.
-- When checked, the frame snaps to the minimap button.
lib:RegisterMinimapPinnable(frame)
4. Utility Functionslib:SetDontResize(frame): Prevents the library from auto-scaling small frames (icons < 40px) up to 40px in Edit Mode.lib:ReanchorFrame(frame, anchorTo, anchorPoint): Dynamically changes the parent anchor while maintaining visual position.lib:GroupOptions({frame1, frame2}, "Group Name"): Groups multiple frames under one checkbox in the "Expanded" system manager list.Part 5: TroubleshootingIssueCauseFixBorders missingForgot TemplateEnsure CreateFrame includes "BackdropTemplate"."Attempt to call method SetBackdrop"Forgot TemplateSame as above. SetBackdrop is a mixin method now.Text looks pixelatedWrong coordinatesDo not use fractional coordinates (e.g., 0.5). Use math.floor.Taint ErrorsTouching protected framesNever parent your frames to PlayerFrame or ActionBars. Use UIParent or your Anchor.Edit Mode Grid missingAnchor size 0Ensure anchor:SetSize(w, h) is set in initialization.Small icons look huge in Edit ModeAuto-resize featureCall lib:SetDontResize(frame) on small icon frames.